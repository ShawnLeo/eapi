(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4af09609"],{"5ac7":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-project-hashTable"},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticStyle:{position:"relative",left:"180px",top:"-6px","z-index":"2",color:"#dddee1"},attrs:{type:"arrow-up-b"}}),n("Table",{staticClass:"datamodel-table",attrs:{columns:e.columns10,data:e.rows}})],1)},a=[],i=(n("c5f6"),{props:{rows:Array,level:Number,showIcon:Boolean},data:function(){var e=this;return{columns10:[{title:"描述",key:"description",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-describe-"+n.index,value:n.row.description,placeholder:"描述"},on:{"on-blur":function(t){e.rows[n.index].description=t.target.value}}})])}}]}},methods:{init:function(){}},watch:{rows:{handler:function(e,t){this.$emit("childrenChange",e)},deep:!0}},mounted:function(){this.init()}}),o=i,s=(n("c444"),n("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=l.exports},6071:function(e,t,n){"use strict";var r=n("ab45"),a=n.n(r);a.a},"6a81":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-project-hashTable"},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticStyle:{position:"relative",left:"180px",top:"-6px","z-index":"2",color:"#dddee1"},attrs:{type:"arrow-up-b"}}),n("Table",{staticClass:"datamodel-table",attrs:{columns:e.columns10,data:e.rows}})],1)},a=[],i=(n("c5f6"),{props:{rows:Array,level:Number,showIcon:Boolean},data:function(){var e=this;return{columns10:[{title:"描述",key:"description",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-describe-"+n.index,value:n.row.description,placeholder:"描述"},on:{"on-blur":function(t){e.rows[n.index].description=t.target.value}}})])}},{title:"默认值",key:"example",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-name-"+n.index,value:n.row.example,placeholder:"默认值"},on:{"on-blur":function(t){e.rows[n.index].example=t.target.value}}})])}}]}},methods:{init:function(){}},watch:{rows:{handler:function(e,t){this.$emit("childrenChange",e)},deep:!0}},mounted:function(){this.init()}}),o=i,s=(n("9fd2"),n("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=l.exports},"84cf":function(e,t,n){"use strict";var r=n("fe6c"),a=n.n(r);a.a},"9e17":function(e,t,n){},"9fd2":function(e,t,n){"use strict";var r=n("d44b"),a=n.n(r);a.a},a493:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-project-hashTable"},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticStyle:{position:"relative",left:"180px",top:"-6px","z-index":"2",color:"#dddee1"},attrs:{type:"arrow-up-b"}}),n("Table",{staticClass:"datamodel-table",attrs:{columns:e.columns10,data:e.rows}})],1)},a=[],i=(n("c5f6"),{props:{rows:Array,level:Number,showIcon:Boolean},data:function(){var e=this;return{columns10:[{title:"描述",key:"description",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-describe-"+n.index,value:n.row.description,placeholder:"描述"},on:{"on-blur":function(t){e.rows[n.index].description=t.target.value}}})])}},{title:"默认值",key:"example",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-name-"+n.index,value:n.row.example,placeholder:"默认值"},on:{"on-blur":function(t){e.rows[n.index].example=t.target.value}}})])}}]}},methods:{init:function(){}},watch:{rows:{handler:function(e,t){this.$emit("childrenChange",e)},deep:!0}},mounted:function(){this.init()}}),o=i,s=(n("6071"),n("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=l.exports},ab45:function(e,t,n){},c444:function(e,t,n){"use strict";var r=n("9e17"),a=n.n(r);a.a},c85b:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-project-hashTable"},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticStyle:{position:"relative",left:"180px",top:"-6px","z-index":"2",color:"#dddee1"},attrs:{type:"arrow-up-b"}}),n("Table",{staticClass:"datamodel-table",attrs:{columns:e.columns10,data:e.rows}})],1)},a=[],i=(n("c5f6"),{props:{rows:Array,level:Number,showIcon:Boolean},data:function(){var e=this;return{columns10:[{title:"描述",key:"description",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-describe-"+n.index,value:n.row.description,placeholder:"描述"},on:{"on-blur":function(t){e.rows[n.index].description=t.target.value}}})])}},{title:"默认值",key:"example",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-name-"+n.index,value:n.row.example,placeholder:"默认值"},on:{"on-blur":function(t){e.rows[n.index].example=t.target.value}}})])}}]}},methods:{init:function(){}},watch:{rows:{handler:function(e,t){this.$emit("childrenChange",e)},deep:!0}},mounted:function(){this.init()}}),o=i,s=(n("84cf"),n("2877")),l=Object(s["a"])(o,r,a,!1,null,null,null);t["a"]=l.exports},cd5a:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-project-hashTable"},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],staticStyle:{position:"relative",left:"180px",top:"-6px","z-index":"2",color:"#dddee1"},attrs:{type:"arrow-up-b"}}),n("Table",{staticClass:"datamodel-table",attrs:{columns:e.columns10,data:e.rows}})],1)},a=[],i=(n("7f7f"),n("c5f6"),n("ae31")),o={props:{rows:Array,level:Number,showIcon:Boolean},data:function(){var e=this;return{columns10:[{title:"值",key:"name",render:function(t,n){return t("div",[t("i-input",{attrs:{id:"edit-name-"+n.index,placeholder:"名称",value:n.row.name},on:{"on-blur":function(t){e.rows[n.index].name=t.target.value}}})])}},{title:"类型",key:"dataType",render:function(t,n){return t("div",[t("Select",{attrs:{id:"edit-name-"+n.index,value:n.row.dataType},on:{"on-change":function(t){return e.rows[n.index].dataType=t,"object"===t?(e.rows[n.index].children.push({name:"",description:"",dataType:"string",example:"",required:!1,children:[],_expanded:!1}),e.rows[n.index]._expanded=!0):(e.rows[n.index].children=[],e.rows[n.index]._expanded=!1),t}}},[t("Option",{props:{value:"array"}},"array"),t("Option",{props:{value:"boolean"}},"boolean"),t("Option",{props:{value:"file"}},"file"),t("Option",{props:{value:"string"}},"string"),t("Option",{props:{value:"object"}},"object")])])}},{title:"键（可选）",key:"address",render:function(e,t){return e("div",[e("i-input",{attrs:{id:"edit-describe-"+t.index,value:t.row.description,placeholder:"描述"}})])}},{title:"描述",key:"address",render:function(e,t){return e("div",[e("i-switch",{attrs:{id:"edit-name-"+t.index}})])}},{title:"添加",key:"action",width:60,align:"center",renderHeader:function(t,n){var r=e;return t("div",[t("Button",{props:{shape:"circle",size:"small",icon:"md-add"},style:{},on:{click:function(){r.rows.push({name:"",description:"",dataType:"string",example:"",required:!1,children:[],_expanded:!1})}}})])},render:function(t,n){return t("div",[t("Button",{props:{shape:"circle",size:"small",icon:"md-remove"},style:{marginRight:"5px"},on:{click:function(){e.rows.splice(n.index,1)}}})])}}]}},methods:{init:function(){},deleteDataModel:function(e,t){var n=this;Object(i["k"])(e,(function(e){"0"===e.header.code?(n.$Message.success("删除成功！"),n.rows.splice(t,1)):n.$Message.error(e.header.message)}))}},watch:{rows:{handler:function(e,t){this.$emit("childrenChange",e)},deep:!0}},mounted:function(){this.init()}},s=o,l=(n("f14d"),n("2877")),c=Object(l["a"])(s,r,a,!1,null,null,null);t["a"]=c.exports},d44b:function(e,t,n){},d885:function(e,t,n){},e8e6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"project-datamodel-edit"},[n("Form",{ref:"datamodelForm",staticStyle:{"margin-top":"30px"},attrs:{model:e.formItem,"label-width":80,rules:e.ruleValidate}},[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),n("FormItem",{staticStyle:{width:"60%"},attrs:{label:"模型名称",prop:"name"}},[n("i-input",{attrs:{placeholder:"最多20个中文或者40个英文字符"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),n("FormItem",{staticStyle:{width:"60%"},attrs:{label:"描述"}},[n("i-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"描述"},model:{value:e.formItem.description,callback:function(t){e.$set(e.formItem,"description",t)},expression:"formItem.description"}})],1),n("FormItem",{attrs:{label:"类别"}},[n("RadioGroup",{attrs:{type:"button",size:"small"},on:{"on-change":e.dataTypeChange},model:{value:e.formItem.dataType,callback:function(t){e.$set(e.formItem,"dataType",t)},expression:"formItem.dataType"}},e._l(e.systemDataModel,(function(e,t){return n("Radio",{key:t,attrs:{label:e.dataType}})})),1)],1),n("FormItem",{attrs:{label:"属性"}},["object"===e.formItem.dataType?n("hash-table",{attrs:{rows:e.formItem.children,name:e.formItem.name,level:1},on:{childrenChange:e.childrenChange}}):e._e(),"array"===e.formItem.dataType?n("array-table",{attrs:{rows:e.formItem.children,name:e.formItem.name,level:1}}):e._e(),"enum"===e.formItem.dataType?n("enum-table",{attrs:{rows:e.formItem.children,level:1}}):e._e(),"string"===e.formItem.dataType?n("string-table",{attrs:{rows:e.formItem.children,level:1}}):e._e(),"integer"===e.formItem.dataType?n("number-table",{attrs:{rows:e.formItem.children,level:1}}):e._e(),"boolean"===e.formItem.dataType?n("boolean-table",{attrs:{rows:e.formItem.children,level:1}}):e._e(),"file"===e.formItem.dataType?n("file-table",{attrs:{rows:e.formItem.children,level:1}}):e._e()],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:"large"},on:{click:e.update}},[e._v("保存")])],1)],1)],1)},a=[],i=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),o=n("d396"),s=n("cd5a"),l=n("e8b0"),c=n("a493"),d=n("6a81"),u=n("c85b"),m=n("5ac7"),p=n("ae31"),h=n("15af"),f=n("7c9e"),v=n.n(f),w=(n("95b8"),n("818b"),{data:function(){var e=this,t=function(t,n,r){Object(p["b"])(e.formItem,(function(e){"0"===e.header.code?e.body?r(new Error("数据模型已存在")):r():r(new Error(e.header.message))}))};return{spinShow:!1,typeBak:"",systemDataModel:[],content:"",formItem:{name:"",dataType:"object",description:"",required:!1,children:[]},ruleValidate:{name:[{required:!0,message:"请输入模型名称",trigger:"blur"},{validator:t,trigger:"blur"}]}}},components:{hashTable:o["a"],enumTable:s["a"],arrayTable:l["a"],stringTable:c["a"],numberTable:d["a"],booleanTable:u["a"],fileTable:m["a"],aceEditor:v.a},methods:{init:function(){this.getDataModelById(),this.getDataModelList()},dataTypeChange:function(e){var t=this;this.$Modal.confirm({title:"确认切换？",content:"<p>切换类型将导致现有数据丢失！</p><p>你确认要切换成“"+e+"”吗？</p>",onOk:function(){t.typeBak=t.formItem.dataType,t.formItem.children=[],t.formItem.children.push({name:"",description:"",dataType:"string",example:"",children:[],required:!1,_expanded:!1})},onCancel:function(){t.formItem.dataType=t.typeBak}})},deleteDataModel:function(e,t){for(var n=this,r=[],a=0;a<e.length;a++)e[a].id&&r.push(e[a]);r.length>0?Object(p["k"])(r,(function(e){"0"===e.header.code?t():n.$Message.error(e.header.message)})):t()},getDataModelById:function(){var e=this;Object(p["E"])({id:this.$route.query.id},(function(t){"0"===t.header.code?(e.formItem=t.body,e.typeBak=e.formItem.dataType,Object(h["g"])(e.formItem.children)):e.$Message.error(t.header.message)}))},getDataModelList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["F"])({type:"system"},(function(e){"0"===e.header.code?t.systemDataModel=e.body:t.$Message.error(e.header.message)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),joint:function(e,t){var n=this;t.forEach((function(t){t.children&&t.children.length>0?t.name&&(e[t.name]={},n.joint(e[t.name],t.children)):e[t.name]=t.example}))},childrenChange:function(e){JSON.stringify(this.formItem.children)!==JSON.stringify(e)&&(this.formItem.children=e)},update:function(){var e=this;this.spinShow=!0,this.$refs["datamodelForm"].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,Object(p["bb"])(e.formItem,(function(t){"0"===t.header.code?(e.$Message.success("修改成功！"),e.init()):e.$Message.error(t.header.message),e.spinShow=!1}));case 3:t.next=6;break;case 5:e.spinShow=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){this.init()}}),b=w,y=n("2877"),x=Object(y["a"])(b,r,a,!1,null,null,null);t["default"]=x.exports},f14d:function(e,t,n){"use strict";var r=n("d885"),a=n.n(r);a.a},fe6c:function(e,t,n){}}]);
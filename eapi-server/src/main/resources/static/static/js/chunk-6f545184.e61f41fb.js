(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f545184"],{1208:function(e,t,r){"use strict";var a=r("459c"),n=r.n(a);n.a},"459c":function(e,t,r){},"7f7f":function(e,t,r){var a=r("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in n||r("9e1e")&&a(n,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},f154:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-tags"},[r("Form",{ref:"formInline",staticClass:"project-tags-form",attrs:{inline:""}},[r("FormItem",[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.newTag}},[e._v("新建标签")])],1),r("FormItem",{attrs:{prop:"search"}},[r("Input",{attrs:{type:"text",placeholder:"名称搜索"},on:{"on-keyup":e.searchData},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}})],1)],1),r("div",{staticClass:"clearfix"}),r("Form",{directives:[{name:"show",rawName:"v-show",value:e.showEditMenus,expression:"showEditMenus"}],ref:"formInline",staticClass:"project-tags-form form-in-table",attrs:{inline:""}},[r("Button",{attrs:{size:"small"},on:{click:e.deleteTags}},[e._v("删除")])],1),r("Table",{ref:"selection",attrs:{loading:e.loading,stripe:"",columns:e.columns,data:e.filterTags},on:{"on-selection-change":e.onCelectionChange}}),r("Modal",{attrs:{title:"新建标签组",width:"700","mask-closable":!1},model:{value:e.addTagModal,callback:function(t){e.addTagModal=t},expression:"addTagModal"}},[r("Form",{ref:"tagFormItem",attrs:{model:e.formItem,"label-width":120,rules:e.ruleValidate}},[r("FormItem",{attrs:{label:"标签名称",prop:"name"}},[r("i-input",{attrs:{placeholder:"例如：user"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"描述",prop:"description"}},[r("i-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"最多20个中文或者40个英文字符"},model:{value:e.formItem.description,callback:function(t){e.$set(e.formItem,"description",t)},expression:"formItem.description"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:e.reset}},[e._v("重置")]),r("Button",{attrs:{type:"primary",size:"large"},on:{click:e.addTag}},[e._v("确定")])],1)],1)],1)},n=[],o=(r("7f7f"),r("96cf"),r("3b8d")),s=r("ae31"),i=r("5d2d"),c={data:function(){var e=this,t=function(t,r,a){Object(s["e"])(e.formItem,(function(e){"0"===e.header.code?e.body?a(new Error("标签已存在")):a():a(new Error(e.header.message))}))};return{addTagModal:!1,loading:!1,formItem:{name:"",description:"",projectId:""},showEditMenus:!1,columns:[{type:"selection",width:58,align:"center"},{title:"名称",sortable:!0,key:"name"},{title:"描述",key:"description"},{title:"创建人",key:"createrUserName"},{title:"创建时间",sortable:!0,render:function(e,t){return e("span",t.row.createTime.substring(0,10))}}],tags:[],filterTags:[],searchModel:"",selection:[],ruleValidate:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"},{validator:t,trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}]}}},computed:{state:function(){return this.$store.state.app}},methods:{init:function(){this.getTagList()},getTagList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.state.projectId||Object(i["a"])("projectId"),this.formItem.projectId=t,e.next=5,Object(s["L"])({projectId:t},(function(e){"0"===e.header.code?(r.tags=e.body,r.filterTags=e.body):r.$Message.error(e.header.message),r.loading=!1}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCelectionChange:function(e){this.showEditMenus=0!==e.length,this.selection=e},reset:function(){this.formItem={name:"",description:"",projectId:this.state.projectId||Object(i["a"])("projectId")}},addTag:function(){var e=this;this.$refs["tagFormItem"].validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,Object(s["j"])(e.formItem,(function(t){"0"===t.header.code?(e.init(),e.reset()):e.$Message.error(t.header.message)}));case 3:e.addTagModal=!1;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},newTag:function(){this.addTagModal=!0},deleteTags:function(){var e=this;this.$Modal.confirm({title:"确认删除？",content:"<p>删除数据不可恢复！</p><p>确认要删除吗？</p>",onOk:function(){Object(s["p"])(e.selection,(function(t){"0"===t.header.code?(e.$Message.success("删除成功！"),e.showEditMenus=!1,e.init()):e.$Message.error(t.header.message)}))},onCancel:function(){e.$Message.success("取消删除！")}})},searchData:function(){var e=this;this.filterTags=this.tags.filter((function(t){return t.name.toLowerCase().indexOf(e.searchModel.toLowerCase())>-1}))}},mounted:function(){this.init()}},l=c,d=(r("1208"),r("2877")),u=Object(d["a"])(l,a,n,!1,null,null,null);t["default"]=u.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-359177a1"],{"0d61":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"swagger"},[a("Row",[a("i-col",{attrs:{span:"24"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"md-refresh"},on:{click:e.init}},[e._v("刷新")])],1)],1),a("Row",{staticClass:"project-list"},[a("i-col",{attrs:{span:"24"}},[a("Table",{attrs:{border:"",loading:e.loading,columns:e.columnDef,data:e.projects}})],1)],1),a("Modal",{attrs:{title:"代码生成","mask-closable":!1,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[a("Form",{ref:"form",attrs:{model:e.swaggerConfig,"label-width":80,rules:e.formValidate}},[a("FormItem",{attrs:{label:"模板",prop:"lang"}},[a("Select",{attrs:{placeholder:"请选择"},on:{"on-change":e.langChange},model:{value:e.swaggerConfig.lang,callback:function(t){e.$set(e.swaggerConfig,"lang",t)},expression:"swaggerConfig.lang"}},[a("Option",{attrs:{value:"meimeitechSpring"}},[e._v("meimeitechSpring")]),a("Option",{attrs:{value:"axios-fetch"}},[e._v("axios-fetch")])],1)],1),e.springShow?a("FormItem",{attrs:{label:"library",prop:"library"}},[a("Select",{attrs:{placeholder:"请选择"},model:{value:e.swaggerConfig.library,callback:function(t){e.$set(e.swaggerConfig,"library",t)},expression:"swaggerConfig.library"}},[a("Option",{attrs:{value:"spring-boot"}},[e._v("spring-boot")])],1)],1):e._e(),e.springShow?a("FormItem",{attrs:{label:"Api包名",prop:"apiPackage"}},[a("Input",{model:{value:e.swaggerConfig.apiPackage,callback:function(t){e.$set(e.swaggerConfig,"apiPackage",t)},expression:"swaggerConfig.apiPackage"}})],1):e._e(),e.springShow?a("FormItem",{attrs:{label:"Model包名",prop:"modelPackage"}},[a("Input",{model:{value:e.swaggerConfig.modelPackage,callback:function(t){e.$set(e.swaggerConfig,"modelPackage",t)},expression:"swaggerConfig.modelPackage"}})],1):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.gen}},[e._v("生成")])],1)],1)],1)},o=[],r=a("ae31"),n=a("5d2d"),g=a("37b6"),s=a("e490"),c={name:"codeGeneratorSwagger",data:function(){var e=this;return{projects:[],swaggerConfig:{apiPackage:"com.xxx.gen.swagger.controller",modelPackage:"com.xxx.gen.swagger.model",lang:"meimeitechSpring",library:"spring-boot"},formValidate:{apiPackage:[{required:!0,message:"请输入Api包名",trigger:"blur"}],modelPackage:[{required:!0,message:"请输入Model包名",trigger:"blur"}],lang:[{required:!0,message:"请选择模板",trigger:"blur"}]},modalVisible:!1,loading:!1,submitLoading:!1,columnDef:[{title:"项目Id",key:"id"},{title:"项目名称",key:"title",render:function(t,a){return t("a",{on:{click:function(){e.$router.push({path:"/code/generator/swagger/interface",query:{projectId:a.row.id}})}}},a.row.title)}},{title:"操作",key:"action",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small",icon:"ios-create-outline"},style:{marginRight:"5px"},on:{click:function(){e.modalVisible=!0,e.swaggerConfig.targetProjectId=a.row.id,e.swaggerConfig.targetProject=s["a"]+"/v2/api-docs/"+a.row.id+"?type=SWAGGER_JSON",e.packageInitFromDb()||e.packageInitFromConfig()}}},"全量生成")])}}]}},computed:{springShow:function(){return"meimeitechSpring"===this.swaggerConfig.lang}},methods:{langChange:function(){this.swaggerConfig.library="",this.springShow?(this.swaggerConfig.library="spring-boot",this.packageInitFromConfig()):(this.swaggerConfig.apiPackage="",this.swaggerConfig.modelPackage="")},packageInitFromDb:function(){var e=Object(n["a"])(g["c"]+this.swaggerConfig.targetProjectId);return!!e&&(this.swaggerConfig=JSON.parse(e),!0)},packageInitFromConfig:function(){var e=Object(n["a"])(g["b"]);if(!e)return!1;var t=JSON.parse(e);return this.swaggerConfig.apiPackage=t.artifactId+"."+t.groupId+".gen.swagger.controller",this.swaggerConfig.modelPackage=t.artifactId+"."+t.groupId+".gen.swagger.model",this.swaggerConfig.artifactId=t.artifactId,this.swaggerConfig.groupId=t.groupId,!0},download:function(e){if(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","SwaggerCodeGen.zip"),document.body.appendChild(a),a.click()}},gen:function(e){var t=this,a=this.download;Object(n["c"])(g["c"]+this.swaggerConfig.targetProjectId,this.swaggerConfig),Object(r["B"])(this.swaggerConfig,(function(e){t.modalVisible=!1,t.$Modal.confirm({title:"生成成功",okText:"确定",iconType:"success",cancelText:"取消",content:"<p>点击确定下载</p>",onOk:function(){Object(r["A"])({id:t.swaggerConfig.targetProjectId},(function(e){a(e)}))}})}))},init:function(){var e=this;this.loading=!0,Object(r["K"])({groupId:"all"},(function(t){e.projects=t.body,e.loading=!1}))}},mounted:function(){this.init()}},l=c,d=(a("6022"),a("2877")),p=Object(d["a"])(l,i,o,!1,null,"6228e0ce",null);t["default"]=p.exports},6022:function(e,t,a){"use strict";var i=a("8cc9"),o=a.n(i);o.a},"8cc9":function(e,t,a){}}]);